(()=>{var oe=i=>typeof i=="object"&&i!=null&&i.nodeType===1,ne=(i,l)=>(!l||i!=="hidden")&&i!=="visible"&&i!=="clip",Z=(i,l)=>{if(i.clientHeight<i.scrollHeight||i.clientWidth<i.scrollWidth){let h=getComputedStyle(i,null);return ne(h.overflowY,l)||ne(h.overflowX,l)||(y=>{let f=(c=>{if(!c.ownerDocument||!c.ownerDocument.defaultView)return null;try{return c.ownerDocument.defaultView.frameElement}catch(T){return null}})(y);return!!f&&(f.clientHeight<y.scrollHeight||f.clientWidth<y.scrollWidth)})(i)}return!1},X=(i,l,h,y,f,c,T,g)=>c<i&&T>l||c>i&&T<l?0:c<=i&&g<=h||T>=l&&g>=h?c-i-y:T>l&&g<h||c<i&&g>h?T-l+f:0,se=i=>{let l=i.parentElement;return l==null?i.getRootNode().host||null:l},_=(i,l)=>{var h,y,f,c;if(typeof document>"u")return[];let{scrollMode:T,block:g,inline:E,boundary:F,skipOverflowHiddenElements:G}=l,k=typeof F=="function"?F:r=>r!==F;if(!oe(i))throw new TypeError("Invalid target");let q=document.scrollingElement||document.documentElement,D=[],L=i;for(;oe(L)&&k(L);){if(L=se(L),L===q){D.push(L);break}L!=null&&L===document.body&&Z(L)&&!Z(document.documentElement)||L!=null&&Z(L,G)&&D.push(L)}let H=(y=(h=window.visualViewport)==null?void 0:h.width)!=null?y:innerWidth,A=(c=(f=window.visualViewport)==null?void 0:f.height)!=null?c:innerHeight,{scrollX:B,scrollY:W}=window,{height:S,width:x,top:C,right:e,bottom:t,left:n}=i.getBoundingClientRect(),{top:s,right:m,bottom:v,left:I}=(r=>{let o=window.getComputedStyle(r);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(i),p=g==="start"||g==="nearest"?C-s:g==="end"?t+v:C+S/2-s+v,w=E==="center"?n+x/2-I+m:E==="end"?e+m:n-I,a=[];for(let r=0;r<D.length;r++){let o=D[r],{height:u,width:d,top:b,right:O,bottom:J,left:R}=o.getBoundingClientRect();if(T==="if-needed"&&C>=0&&n>=0&&t<=A&&e<=H&&C>=b&&t<=J&&n>=R&&e<=O)return a;let Y=getComputedStyle(o),j=parseInt(Y.borderLeftWidth,10),P=parseInt(Y.borderTopWidth,10),V=parseInt(Y.borderRightWidth,10),z=parseInt(Y.borderBottomWidth,10),M=0,N=0,$="offsetWidth"in o?o.offsetWidth-o.clientWidth-j-V:0,U="offsetHeight"in o?o.offsetHeight-o.clientHeight-P-z:0,K="offsetWidth"in o?o.offsetWidth===0?0:d/o.offsetWidth:0,Q="offsetHeight"in o?o.offsetHeight===0?0:u/o.offsetHeight:0;if(q===o)M=g==="start"?p:g==="end"?p-A:g==="nearest"?X(W,W+A,A,P,z,W+p,W+p+S,S):p-A/2,N=E==="start"?w:E==="center"?w-H/2:E==="end"?w-H:X(B,B+H,H,j,V,B+w,B+w+x,x),M=Math.max(0,M+W),N=Math.max(0,N+B);else{M=g==="start"?p-b-P:g==="end"?p-J+z+U:g==="nearest"?X(b,J,u,P,z+U,p,p+S,S):p-(b+u/2)+U/2,N=E==="start"?w-R-j:E==="center"?w-(R+d/2)+$/2:E==="end"?w-O+V+$:X(R,O,d,j,V+$,w,w+x,x);let{scrollLeft:ee,scrollTop:te}=o;M=Q===0?0:Math.max(0,Math.min(te+M/Q,o.scrollHeight-u/Q+U)),N=K===0?0:Math.max(0,Math.min(ee+N/K,o.scrollWidth-d/K+$)),p+=te-M,w+=ee-N}a.push({el:o,top:M,left:N})}return a};var re=i=>i===!1?{block:"end",inline:"nearest"}:(l=>l===Object(l)&&Object.keys(l).length!==0)(i)?i:{block:"start",inline:"nearest"};function ie(i,l){if(!i.isConnected||!(f=>{let c=f;for(;c&&c.parentNode;){if(c.parentNode===document)return!0;c=c.parentNode instanceof ShadowRoot?c.parentNode.host:c.parentNode}return!1})(i))return;let h=(f=>{let c=window.getComputedStyle(f);return{top:parseFloat(c.scrollMarginTop)||0,right:parseFloat(c.scrollMarginRight)||0,bottom:parseFloat(c.scrollMarginBottom)||0,left:parseFloat(c.scrollMarginLeft)||0}})(i);if((f=>typeof f=="object"&&typeof f.behavior=="function")(l))return l.behavior(_(i,l));let y=typeof l=="boolean"||l==null?void 0:l.behavior;for(let{el:f,top:c,left:T}of _(i,re(l))){let g=c-h.top+h.bottom,E=T-h.left+h.right;f.scroll({top:g,left:E,behavior:y})}}window.copyCode=window.copyCode||function(i,l){let h=document.getElementById(l);if(h){let y=h.innerText;navigator.clipboard.writeText(y);let f=i.innerHTML;i.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{i.innerHTML=f},3e3)}};(()=>{let i=async()=>{var t;let e=(((t=window.kr)==null?void 0:t.siteRoot)||"/")+"config.json";return await fetch(e).then(n=>n.json())},l=()=>{let e=!1,t=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",n=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),t(),window.addEventListener("scroll",t)},h=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(n=>{n.removeAttribute("id")});let t=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{t.classList.contains("toon")?(t.classList.remove("toon"),e.classList.remove("show")):(t.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",n=>{n.target.tagName.toLowerCase()==="a"&&n.target.getAttribute("href")&&(t.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",n=>{window.innerWidth>768&&t.classList.contains("toon")&&(t.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},y=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var t;(t=e.querySelector(".collapse-box-header"))==null||t.addEventListener("click",n=>{e.classList.toggle("active")})})},f=e=>{if(e.enable){let t=document.getElementsByClassName("kratos-page-content");t.length>0&&new Viewer(t[0])}},c,T=e=>{c=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},g=e=>{e.enable&&(document.body.oncopy=t=>{if(c){let n=window.getSelection().toString();n.length>e.threshold&&(t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",n+c))}})},E="",F=()=>{E=document.title},G=e=>{if(e.enable){let t,n=document.querySelector('[rel="icon"]'),s=n.getAttribute("href");document.addEventListener("visibilitychange",()=>{document.hidden?(document.title=e.leaveTitle,e.leaveLogo&&n.setAttribute("href",e.leaveLogo),clearTimeout(t)):(document.title=e.returnTitle+" "+E,e.leaveLogo&&n.setAttribute("href",s),t=setTimeout(()=>{document.title=E,t=0},2e3))})}},k=(e,t=!0)=>{let n,s=e/1e3,m=Math.floor(s/60/60/24),v=Math.floor(s/60/60-24*m),I=Math.floor(s/60-24*60*m-60*v),p=Math.floor(s-24*60*60*m-60*60*v-60*I),w=m.toString(),a=v.toString(),r=I.toString(),o=p.toString();return t?(w&&w.length===1&&(w="0"+w),a&&a.length===1&&(a="0"+a),r&&r.length===1&&(r="0"+r),o&&o.length===1&&(o="0"+o),n=w+"\u5929"+a+"\u5C0F\u65F6"+r+"\u5206"+o+"\u79D2"):m<540?m<60?n=w+"\u5929":n=Math.floor(m/30).toString()+"\u4E2A\u6708":n=Math.floor(m/365).toString()+"\u5E74",n},q=e=>{let t=new Date(e.since),n=document.getElementById("kr-since");setInterval(()=>{n.innerText=k(Date.now()-t)},1e3)},D=()=>{document.querySelectorAll("figure.highlight").forEach((t,n)=>{t.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0].setAttribute("id","code-".concat(n)),t.innerHTML+='<button class="copy" onclick="copyCode(this, \'code-'.concat(n,'\')">\n                <i class="fa fa-copy"></i>&nbsp;\u590D\u5236\n            </button>')})},L=()=>{let e=typeof window<"u",t=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),n=e&&"IntersectionObserver"in window,s=document.querySelector(".kr-comments.lazy-load"),m=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!t&&n&&s){let v=new IntersectionObserver(I=>{I[0].isIntersecting&&(m(),v.disconnect())},{threshold:0});v.observe(s)}else m();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},H=e=>{if(e.expireAfter){let t=document.getElementById("expire-alert");if(t){let n=t.querySelector("time"),s=new Date(parseInt(n.getAttribute("datetime"))),v=Date.now()-s;v>e.expireAfter*24*3600*1e3&&(n.innerText=k(v,!1),t.classList.remove("hidden"))}}},A=(e,t)=>{let n=0;return function(){let s=this,m=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(s,m)},t||0)}},B=()=>{let e=document.getElementById("krw-toc"),t=()=>{let n=e.getElementsByClassName("toc-item"),s=[];try{Array.from(n).forEach(a=>{let r=a.querySelector(".toc-link"),o=decodeURI(r.getAttribute("href"));if(o.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let u=document.getElementById(o.substring(1));if(!u)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");u.setAttribute("data-toc-id",s.length),s.push({at:u,el:a})})}catch(a){console.log("\u9519\u8BEF\uFF1A",a.message),Array.from(n).forEach(r=>{r.classList.add("show")});return}let m=-1,v=a=>{if(m!==a){if(m!==-1&&s[m]){s[m].el.classList.remove("active"),s[m].el.classList.remove("show");let r=s[m].el;for(;!r.classList.contains("toc");)r.classList.contains("toc-item")&&r.classList.remove("show"),r=r.parentNode}if(a!==-1&&s[a]){s[a].el.classList.add("active"),s[a].el.classList.add("show");let r=s[a].el;for(;!r.classList.contains("toc");)r.classList.contains("toc-item")&&r.classList.add("show"),r=r.parentNode;setTimeout(()=>{var u;let o=(u=s[a])==null?void 0:u.el;o&&ie(o,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}m=a}};if("IntersectionObserver"in window){let a=A((o,u)=>{u===window.scrollY?window.requestAnimationFrame(()=>{v(o)}):a(o,window.scrollY)},100),r=new IntersectionObserver(o=>{let u=null;o.forEach(d=>{let b=Number.parseInt(d.target.getAttribute("data-toc-id"),10);!d.isIntersecting&&d.boundingClientRect.top<=d.rootBounds.top?u=b:d.isIntersecting&&d.boundingClientRect.bottom<d.rootBounds.top+d.rootBounds.height/2&&d.intersectionRatio===1&&(u=b-1)}),u!==null&&a(u,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});s.forEach(o=>{r.observe(o.at)}),window.addEventListener("pjax:before",()=>{r.disconnect(),s.length=0},{once:!0})}else{let a=()=>{s.forEach(d=>{d.h=d.at.getBoundingClientRect().top+window.scrollY-61})};a();let r=()=>{let d;!Number.isInteger(m)||m<0||m>s.length-1?d=0:d=m;let b=window.scrollY;if(b>=s[d].h)if(b>=s[s.length-1].h)d=s.length-1;else for(;b>=s[d+1].h;)d++;else for(;b<s[d].h&&(d--,!(d<0)););return d},o=A(()=>{window.requestAnimationFrame(()=>{v(r())})},100),u=A(()=>{a(),window.requestAnimationFrame(()=>{v(r())})},100);window.addEventListener("resize",u),window.addEventListener("scroll",o),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",u),window.removeEventListener("scroll",o),s.length=0},{once:!0})}let I=document.getElementsByClassName("toc-progress-bar")[0],p=document.querySelector(".kratos-page-content"),w=()=>{if(p){let a=window.scrollY||document.documentElement.scrollTop,r=p.clientHeight,o=document.documentElement.clientHeight,u=p.offsetTop,d=r>o?r-o:document.documentElement.scrollHeight-o,b=Math.max(0,Math.min((a-u)/d,1)),O=Math.round(b*100);I.style.width=(b*100).toString()+"%",I.setAttribute("aria-valuenow",O)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(w)}),w()};e&&(e.offsetParent!==null?t():"IntersectionObserver"in window&&new IntersectionObserver(t,{threshold:0,once:!0}).observe(e))},W=e=>{if(!e.enable)return;let t=window.innerHeight,n=!1,s=()=>{window.requestAnimationFrame(()=>{t<window.scrollY?n||(document.body.classList.add("nav-up"),n=!0):t>window.scrollY&&n&&(document.body.classList.remove("nav-up"),n=!1),t=window.scrollY})};window.addEventListener("wheel",s)},S=()=>{B(),F(),D(),y(),L()},x=e=>{T(e.copyrightNoticeForCopy),H(e.expireNotify),f(e.viewerjs)},C=()=>{document.removeEventListener("DOMContentLoaded",C,!1),window.removeEventListener("load",C,!1),i().then(e=>{g(e.copyrightNoticeForCopy),G(e.inactiveNotice),q(e.uptime),W(e.topNavScrollToggle),x(e),window.addEventListener("pjax:complete",()=>{x(e)})}),l(),h(),S(),window.addEventListener("pjax:complete",()=>{S()})};document.readyState==="complete"?setTimeout(C):(document.addEventListener("DOMContentLoaded",C,!1),window.addEventListener("load",C,!1))})();})();
